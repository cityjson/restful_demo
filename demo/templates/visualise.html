

<meta charset='utf-8' />

<style>
#viewer{
    height:100%;
}
 </style>



<!-- 3rd party code -->
<script src="https://threejs.org/build/three.js"></script>
<script type="text/javascript" src="{{ url_for('static', filename='3rd/jquery.js') }}"></script>
<script type="text/javascript" src="{{ url_for('static', filename='3rd/proj4.js') }}"></script>

<!-- Scripts for loading CityObjects -->
<script type="text/javascript" src="{{ url_for('static', filename='functions.js') }}"></script>
<script type="text/javascript" src="{{ url_for('static', filename='OrbitControls.js') }}"></script>
<script type="text/javascript" src="{{ url_for('static', filename='3rd/earcut.js') }}"></script>
<script type="text/javascript" src="{{ url_for('static', filename='handle_cjf.js') }}"></script>

<!-- Elements for visualisation -->
<div id="dragger"></div>
<div id="viewer"></div>

<!-- Retrieve variables from Flask if they exist (from render_template arguments) -->
<script>
    {% if jcm is defined %}
    initDocument();
    initViewer();

    var jcm = {{ jcm|tojson }}
    bbox = jcm["metadata"]["geographicalExtent"]

    calculateDiag();
    handleNewFeature(jcm);
    {% endif %}

    {% if dataset is defined %}
    initDocument();
    initViewer();

    var dataset = {{ dataset|tojson }};
    streamUrl = {{ url_for('stream', dataset=dataset)|tojson }};
    {% endif %}
</script>


<!-- Initiate streaming of dataset into harp.gl map -->
<script type="text/javascript"
src="{{ url_for('static', filename='stream_cjc.js') }}"></script>


